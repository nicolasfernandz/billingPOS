 
{% extends "pages/base.html" %}

{% block title %}GestionArt Las Anitas - Arte en Gesti√≥n{% endblock %}
 
 {% block content %}
 <head>
   <meta charset="utf-8">
 </head>
 
 <body onload="show_cant_clients();" >
			<!-- Search -->	
            <div class="row">
                <div class="col-lg-9">
                    <!-- <h1 class="page-header">Dashboard</h1> -->
                    <ul class="my-page-header nav" id="side-menu">
                        <li class="sidebar-search">
                            <div class="input-group custom-search-form">
                                <input type="text" class="form-control" placeholder="Search...">
                                <span class="input-group-btn">
                                <button class="btn btn-default" type="button" onclick="tables.html">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                            </div>
                            <!-- /input-group -->
                        </li>
                    </ul>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
		</br>
		 <div class="row">
                <div class="col-lg-11 col-md-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <div class="row" >
                                <div class="col-xs-2">
									<div class="col-xs-12">
										<i class="glyphicon glyphicon-search fa-3x" id="iconTareas"></i>
									</div>	
                                </div>
								<div id= 'estadoclients' class="col-xs-7"> 
									<h1>Lista de Clientes</h1> 
									
								</div>
                                <div class="col-xs-3 text-right">
                                    <div class="huge" id="cant_clients">                             
                                   
                                   							
                                    </div>
                                    <div id="filtroVehicles">Clientes Mostrados!</div>
                                </div>
                            </div>
                        </div>
						<div class="panel-body">
						 <!-- Table -->
							<table class="table table-hover" id="tablaVentas">
								<thead>
									<td><strong>Producto</strong></td>
									<td><strong>Precio</strong></td>
									<td><strong>Fecha</strong></td>
									<td><strong>Unidades</strong></td>
						
								</thead>
								<tbody>
								{% for venta in all_ventas %}
									<tr>
										<td><strong><a href="/gestionArt/client/{{client.id}}"> {{ venta.Producto.nombre }} </a> </strong></td>
										<td><strong><a href="/gestionArt/client/{{client.id}}"> {{ venta.Venta.precio }} </a> </strong></td>
										<td><strong><a href="/gestionArt/client/{{client.id}}"> {{ venta.Venta.fecha|date:"d-m-Y H:i:s" }} </a> </strong></td>
										<td><strong><a href="/gestionArt/client/{{client.id}}"> {{ venta.Venta.cantidad_unidades}} </a></strong></td>
										
									</tr>
								{% endfor %}
								</tbody>
						  </table>
						</div>
                    </div>
                </div>
				
			</div>
	{% endblock %}


{% block encabezado %}
</body>

<script type="text/javascript">
    $(function () {
    	otable = $("#tablaClients").dataTable();
    	 
    	//Setting number of filtered rows into a div
    	//show_cant_vehicles();
    })
    
    function filterme() {
	 //build a regex filter string with an or(|) condition
	 var types = $('input:checkbox[name="type"]:checked').map(function() {
	   //return '^' + this.value + '\$';
	 return this.value;
	 }).get().join('|');
	 //filter in column 4, with an regex, no smart filtering, no inputbox,not case sensitive
	 otable.fnFilter(types, 4, true, false, false, false); 
	 otable.fnDraw();
	
	 //Setting number of filtered rows into a div
	  show_cant_clients();
	}
    
    function show_cant_clients() {
		//Setting number of filtered rows in div		
		otable = $("#tablaClients").dataTable();
		document.getElementById('cant_clients').innerHTML = otable.fnSettings().fnRecordsDisplay();
	}
</script>
{% endblock %}